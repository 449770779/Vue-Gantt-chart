(function(t){function e(e){for(var r,l,s=e[0],o=e[1],c=e[2],u=0,h=[];u<s.length;u++)l=s[u],n[l]&&h.push(n[l][0]),n[l]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);d&&d(e);while(h.length)h.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],r=!0,s=1;s<i.length;s++){var o=i[s];0!==n[o]&&(r=!1)}r&&(a.splice(e--,1),t=l(l.s=i[0]))}return t}var r={},n={app:0},a=[];function l(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=t,l.c=r,l.d=function(t,e,i){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)l.d(i,r,function(e){return t[e]}.bind(null,r));return i},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=o;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},1831:function(t,e,i){"use strict";var r=i("8814"),n=i.n(r);n.a},"292f":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("06f1"),i("450d");var r,n=i("6ac9"),a=i.n(n),l=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("header",{staticClass:"top-bar"},[t._v("Vue-Gantt-Chart\n    "),i("label",{attrs:{for:"cellWidth"}},[t._v("cellWidth")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.cellWidth,expression:"cellWidth",modifiers:{number:!0}}],attrs:{type:"range",min:"20",max:"100"},domProps:{value:t.cellWidth},on:{__r:function(e){t.cellWidth=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),i("label",{attrs:{for:"cellHeight"}},[t._v("cellHeight")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.cellHeight,expression:"cellHeight",modifiers:{number:!0}}],attrs:{type:"range",min:"20",max:"100"},domProps:{value:t.cellHeight},on:{__r:function(e){t.cellHeight=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),i("label",{attrs:{for:"titleWith"}},[t._v("titleWidth")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.titleWidth,expression:"titleWidth",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:"250"},domProps:{value:t.titleWidth},on:{__r:function(e){t.titleWidth=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),i("label",{attrs:{for:"hideHeader"}},[t._v("hideHeader")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.hideHeader,expression:"hideHeader"}],attrs:{id:"hideHeader",type:"checkbox"},domProps:{checked:Array.isArray(t.hideHeader)?t._i(t.hideHeader,null)>-1:t.hideHeader},on:{change:function(e){var i=t.hideHeader,r=e.target,n=!!r.checked;if(Array.isArray(i)){var a=null,l=t._i(i,a);r.checked?l<0&&(t.hideHeader=i.concat([a])):l>-1&&(t.hideHeader=i.slice(0,l).concat(i.slice(l+1)))}else t.hideHeader=n}}}),i("label",{attrs:{for:"datasNum"}},[t._v("datasNum")]),i("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:t.datasNum,expression:"datasNum",modifiers:{number:!0,lazy:!0}}],attrs:{id:"datasNum"},domProps:{value:t.datasNum},on:{change:function(e){t.datasNum=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),i("label",{attrs:{for:"scrollToY"}},[t._v("scrollToY")]),i("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:t.scrollToY,expression:"scrollToY",modifiers:{number:!0,lazy:!0}}],attrs:{id:"scrollToY"},domProps:{value:t.scrollToY},on:{change:function(e){t.scrollToY=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),i("label",{attrs:{for:"scale"}},[t._v("scale")]),i("select",{directives:[{name:"model",rawName:"v-model.number",value:t.scale,expression:"scale",modifiers:{number:!0}}],attrs:{id:"scale"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var i="_value"in e?e._value:e.value;return t._n(i)});t.scale=e.target.multiple?i:i[0]}}},t._l(t.scaleList,function(e){return i("option",{key:e},[t._v(t._s(e))])}),0),i("span",[t._v("minute")])]),i("div",{staticClass:"container"},[i("v-gantt-chart",{attrs:{startTime:t.startTime,endTime:t.endTime,cellWidth:t.cellWidth,cellHeight:t.cellHeight,timeLines:t.timeLines,titleHeight:t.titleHeight,scale:t.scale,titleWidth:t.titleWidth,showCurrentTime:"",hideHeader:t.hideHeader,dataKey:t.dataKey,arrayKeys:t.arrayKeys,scrollToPostion:t.positionA,datas:t.datasA},on:{scrollLeft:t.scrollLeftA},scopedSlots:t._u([{key:"block",fn:function(e){var r=e.data,n=e.item;return[i("Test",{attrs:{data:r,updateTimeLines:t.updateTimeLines,cellHeight:t.cellHeight,currentTime:t.currentTime,item:n}})]}},{key:"left",fn:function(t){var e=t.data;return[i("TestLeft",{attrs:{data:e}})]}},{key:"title",fn:function(){return[t._v("\n        铁胆火车侠日程表\n      ")]},proxy:!0}])}),i("v-gantt-chart",{attrs:{startTime:t.startTime,endTime:t.endTime,cellWidth:t.cellWidth,cellHeight:t.cellHeight,timeLines:t.timeLines,titleHeight:t.titleHeight,scale:t.scale,titleWidth:t.titleWidth,showCurrentTime:"",hideHeader:"",dataKey:t.dataKey,arrayKeys:t.arrayKeys,scrollToPostion:t.positionB,datas:t.datasB},on:{scrollLeft:t.scrollLeftB},scopedSlots:t._u([{key:"block",fn:function(e){var r=e.data,n=e.item;return[i("Test",{attrs:{data:r,updateTimeLines:t.updateTimeLines,cellHeight:t.cellHeight,currentTime:t.currentTime,item:n}})]}},{key:"left",fn:function(t){var e=t.data;return[i("TestLeft",{attrs:{data:e}})]}},{key:"title",fn:function(){return[t._v("\n        铁胆火车侠日程表\n      ")]},proxy:!0}])})],1),t._m(0)])},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("footer",{staticClass:"main-footer"},[t._v("MIT ©wuchouchou"),i("span",{staticStyle:{float:"right"}},[t._v("注:该demo由两个甘特组件组合而成")])])}],c=i("bd86"),d=(i("6b54"),i("e814")),u=i.n(d),h=(i("28a5"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[i("div",{staticClass:"plan",style:{"background-color":t.statusColor,"margin-top":.1*t.cellHeight+"px"},attrs:{slot:"reference"},on:{click:t.onClick},slot:"reference"},[i("div",{staticClass:"runTime"},[i("span",[t._v("S:"+t._s(t.startToString))]),i("span",[t._v("E:"+t._s(t.endToString))])]),i("div",{staticClass:"middle"},[t._v("编号"+t._s(t.item.id))])]),i("div",{staticClass:"detail"},[i("span",{staticClass:"header"},[t._v(t._s(t.data.type)+t._s(t.data.name)+t._s(t.data.id))]),i("ul",[i("li",[i("span",[t._v("发车时间：")]),i("span",[t._v(t._s(t.startToString))])]),i("li",[i("span",[t._v("到站时间：")]),i("span",[t._v(t._s(t.endToString))])]),i("li",[i("span",[t._v("载员：")]),i("span",[t._v(t._s(t.item.passenger))])]),i("li",[i("span",[t._v("编号：")]),i("span",[t._v(t._s(t.item.id))])])])])])}),f=[],m=(i("c5f6"),i("c1df")),p=i.n(m),g="#D5F8EA",v="#BFF2FE",y="#F2F2F2",T={name:"Test",props:{data:Object,item:Object,currentTime:p.a,updateTimeLines:Function,cellHeight:Number},data:function(){return{moment:p.a}},computed:{statusColor:function(){var t=this.item,e=this.currentTime,i=p()(t.start),r=p()(t.end);return i.isBefore(e)&&r.isAfter(e)?g:r.isBefore(e)?y:v},startToString:function(){return p()(this.item.start).format("HH:mm")},endToString:function(){return p()(this.item.end).format("HH:mm")}},methods:{onClick:function(){this.updateTimeLines(this.item.start,this.item.end)}}},b=T,_=(i("c346"),i("2877")),x=Object(_["a"])(b,h,f,!1,null,"dfa6d88e",null),H=x.exports,k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"name",style:{background:t.data.colorPair.light}},[i("div",{staticClass:"colorBar",style:{background:t.data.colorPair.dark}}),i("div",{staticClass:"type"},[t._v(t._s(t.data.type))]),i("div",{staticClass:"carId"},[t._v(t._s(t.data.name)+t._s(t.data.id))]),i("div",{staticClass:"speed"},[t._v(t._s(t.data.speed)+"km/s")])])},w=[],L={name:"TestLeft",props:{data:Object}},W=L,S=(i("ce2f"),Object(_["a"])(W,k,w,!1,null,"46d7a7a4",null)),C=S.exports,A=(i("a481"),i("96eb")),O=i.n(A),B=["(252, 105, 100)","(247, 167, 71)","(116, 202, 90)","(83, 186, 241)","(208, 142, 2231)"],N="希望号,飞翼号,光明号,窥探号,力神号,警官号,闪电流星号,博士号,霹雳火神号,狙击手号,希望之光号,南海忍者号,火速E3号,山神号,安全卫士号,铁锤号,寿星号,星星号,罗曼斯卡,欲望号,霹雳雷电号,消防号,欧洲之星号".split(","),P="🚅,🚈,🚄".split(","),K=O.a.Random,$={id:function(){return"JHR"+K.natural(100,999)+K.character("upper")+K.character("upper")},name:function(){return K.pick(N)},type:function(){return K.pick(P)},colorPair:function(){var t="rgb"+K.pick(B);return{dark:t.replace(")",",0.8)"),light:t.replace(")",",0.1)")}},speed:function(){return K.natural(0,200)},gtArray:function(){var t=[],e=0,i=K.natural(1,9),r=p()().subtract(12,"h"),n=p()().subtract(12,"h");while(e<i)r=n.clone().add(K.natural(1,5),"h"),n=r.clone().add(K.natural(1,5),"h"),t.push({id:"D"+K.natural(1e3,9999),passenger:K.natural(10,200),start:r.toString(),end:n.toString()}),e++;return t}};function j(t){for(var e=[],i=0,r=K.natural(t,t);i<r;i++)e.push(O.a.mock($));return e}var E="1,2,3,4,5,6,10,12,15,20,30,60,120,180,240,360,720,1440".split(",").map(function(t){return u()(t)}),D=(r={name:"App",components:{Test:H,TestLeft:C},data:function(){return{timeLines:[{time:p()().add(2,"h").toString()},{time:p()().add(5,"h").toString(),color:"#747e80"}],currentTime:p()(),startTime:p()().subtract(5,"h").toString(),endTime:p()().add(2,"d").add(2,"h").add(5,"s").toString(),cellWidth:50,cellHeight:30,titleHeight:40,titleWidth:250,scale:60,datasNum:100,datasA:j(50),datasB:j(50),dataKey:"id",scaleList:E,scrollToTime:p()().add(1,"d").toString(),scrollToPostion:{x:1e4,y:1e4},hideHeader:!1,arrayKeys:["gtArray","error"],scrollToY:0,positionB:{},positionA:{}}},watch:{datasNum:function(t){this.datasA=j(t),this.datasB=j(t)}},computed:{}},Object(c["a"])(r,"watch",{scrollToY:function(t){this.positionA={x:t}}}),Object(c["a"])(r,"methods",{updateTimeLines:function(t,e){this.timeLines=[{time:t},{time:e,color:"#747e80"}]},scrollLeftA:function(t){this.positionB={x:t}},scrollLeftB:function(t){this.positionA={x:t}}}),r),z=D,Y=(i("1831"),Object(_["a"])(z,s,o,!1,null,"fd03d1ee",null)),M=Y.exports,q=i("9fa0"),I=i.n(q);l["default"].config.productionTip=!1,l["default"].use(I.a),l["default"].use(a.a),new l["default"]({render:function(t){return t(M)}}).$mount("#app")},"5cf8":function(t,e,i){},"66f9":function(t,e,i){var r={"./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=a(t);return i(e)}function a(t){var e=r[t];if(!(e+1)){var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}return e}n.keys=function(){return Object.keys(r)},n.resolve=a,t.exports=n,n.id="66f9"},7305:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"gantt-chart",on:{wheel:t.wheelHandle}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.hideHeader,expression:"!hideHeader"}],staticClass:"gantt-header"},[i("div",{staticClass:"gantt-header-title",style:{"line-height":t.titleHeight+"px",height:t.titleHeight+"px","max-width":t.titleWidth+"px","min-width":t.titleWidth+"px"}},[t._t("title",[t._v("welcome v-gantt-chart")])],2),i("div",{ref:"headerTimeline",staticClass:"gantt-header-timeline"},[i("timeline",{style:{width:t.totalWidth+"px"},attrs:{start:t.start,end:t.end,cellWidth:t.cellWidth,titleHeight:t.titleHeight,scale:t.scale}})],1)]),i("div",{staticClass:"gantt-body",style:{height:"calc(100% - "+(t.hideHeader?0:t.titleHeight)+"px)"}},[i("div",{staticClass:"gantt-table",style:{height:"calc(100% - "+(t.hideXScrollBar?0:t.scrollBarWitdh)+"px)",width:"calc(100% - "+(t.hideYScrollBar?0:t.scrollBarWitdh)+"px)"}},[i("div",{ref:"marklineArea",staticClass:"gantt-markline-area"},[t.showCurrentTime?i("CurrentTime",{attrs:{getTimeLinePosition:t.getTimeLinePosition}}):t._e(),t._l(t.timeLines,function(e,r){return i("mark-line",{key:r,attrs:{markLineTime:e.time,getTimeLinePosition:t.getTimeLinePosition,color:e.color}})})],2),i("div",{ref:"leftbarWrapper",staticClass:"gantt-leftbar-wrapper",style:{"max-width":t.titleWidth+"px","min-width":t.titleWidth+"px"}},[i("LeftBar",{style:{height:t.totalHeight+"px"},attrs:{datas:t.datas,dataKey:t.dataKey,scrollTop:t.scrollTop,containerHeight:t.containerHeight,containerWidth:t.containerWidth,cellHeight:t.cellHeight},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return[t._t("left",[i("div",{staticClass:"gantt-leftbar-defalutItem"})],{data:r})]}}],null,!0)})],1),i("div",{ref:"blocksWrapper",staticClass:"gantt-blocks-wrapper"},[i("blocks",{style:{width:t.totalWidth+"px"},attrs:{scrollTop:t.scrollTop,scrollLeft:t.scrollLeft,containerHeight:t.containerHeight,containerWidth:t.containerWidth,arrayKeys:t.arrayKeys,itemKey:t.itemKey,dataKey:t.dataKey,datas:t.datas,cellWidth:t.cellWidth,cellHeight:t.cellHeight,scale:t.scale,beginTimeOfTimeLine:t.beginTimeOfTimeLine},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data,n=e.item;return[t._t("block",[i("div",{staticClass:"gantt-block-defaultBlock"})],{data:r,item:n})]}}],null,!0)})],1)]),i("div",{ref:"scrollXBar",staticClass:"gantt-scroll-y",style:{width:(t.hideYScrollBar?0:t.scrollBarWitdh)+"px"},on:{scroll:t.syncScrollY}},[i("div",{style:{height:t.totalHeight+"px"}})]),i("div",{ref:"scrollYBar",staticClass:"gantt-scroll-x",style:{height:(t.hideXScrollBar?0:t.scrollBarWitdh)+"px"},on:{scroll:t.syncScrollX}},[i("div",{style:{width:t.totalWidth+"px"}})])])])},n=[],a=(i("7921"),i("bfb3")),l=i.n(a),s=(i("40ba"),i("ea51"),i("d833"),i("c1df")),o=i.n(s),c=[1,2,3,4,5,6,10,12,15,20,30,60,120,180,240,360,720,1440];function d(t){if(!c.includes(t))throw new RangeError("错误的scale值，输入值为".concat(t,",可用的scale值为").concat(c.join(",")));return!0}function u(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;d(i);var r=t.clone(),n=i/60;return i>60?(e=Math.floor(t.hour()/n),r.hour(e*n).minute(0).seconds(0)):(e=Math.floor(t.minutes()/i),r.minutes(e*i).seconds(0)),r}function h(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;if(!o.a.isMoment(t)||!o.a.isMoment(e))throw new TypeError("参数必须为moment 对象");if(t.isAfter(e))throw new TypeError("错误的参数顺序，函数calcScalesAbout2Times的第一个时间参数必须大于第二个时间参数");d(i);var r=u(t,i),n=0;while(!r.isAfter(e))n++,r.add(i,"m");return n}function f(t){return void 0===t||null===t}function m(t){return void 0!==t&&null!==t}function p(t){console.warn(t)}var g=function(){var t={},e={};return function(i,r){return t[i]!==r&&(t[i]=r,e[i]=T(r)),e[i]}}();function v(t,e,i){var r=i.scale,n=i.cellWidth,a=g("pStart",t),l=T(e);return b(a,l)/r*n}function y(t,e,i){var r=i.scale,n=i.cellWidth,a=g("pStart",t),l=g("pBeginTimeOfTimeLine",e);return b(l,a)/r*n}function T(t){return new Date(t)}function b(t,e){var i=e.getTime()-t.getTime();return(i/1e3/60).toFixed(4)}function _(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var n=this,a=arguments,l=function(){e=null,r||t.apply(n,a)},s=r&&!e;clearTimeout(e),e=setTimeout(l,i),s&&t.apply(n,a)}}var x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"gantt-timeline",style:{"margin-left":-t.cellWidth/2+"px"}},t._l(t.getDays,function(e,r){return i("div",{key:r,staticClass:"gantt-timeline-block"},[i("div",{staticClass:"gantt-timeline-day ",style:{height:t.titleHeight/2+"px","line-height":t.titleHeight/2+"px"}},[t._v(t._s(e.format("MM/DD")))]),i("div",{staticClass:"gantt-timeline-scale ",style:{height:t.titleHeight/2+"px","line-height":t.titleHeight/2+"px"}},t._l(t.getTimeScales(e),function(e,r){return i("div",{key:r,staticClass:"gantt-cell-width"},[t._v("\n        "+t._s(e)+"\n      ")])}),0)])}),0)},H=[],k=i("67bb"),w=i.n(k),L=w()(),W=w()(),S=w()();function C(t,e){return t.isSame(e,"day")}var A={name:"Timeline",props:{start:{type:o.a,required:!0},end:{type:o.a,required:!0},cellWidth:{type:Number,default:50},titleHeight:{type:Number,default:40},scale:{type:Number,default:60}},computed:{getDays:function(){for(var t=[],e=this.start.clone(),i=this.end;!C(e,i);e.add(1,"d"))t.push(e.clone());return t.push(e.clone()),t}},methods:{getTimeScales:function(t){var e=[],i=this.start,r=this.end;return e=C(t,i)?this.generateTimeScale(L):C(t,r)?this.generateTimeScale(S):this.generateTimeScale(W),e},generateTimeScale:function(t){var e,i,r=[],n=this.start,a=this.end,l=this.scale;switch(t){case L:e=u(n,l),i=C(n,a)?a:n.clone().endOf("day");break;case S:e=a.clone().startOf("day"),i=a.clone();break;case W:e=n.clone().startOf("day"),i=n.clone().endOf("day");break;default:throw new TypeError("错误的计算类型")}while(!e.isAfter(i))l>=60?r.push(e.format("HH")):r.push(e.format("HH:mm")),e.add(l,"m");return r}}},O=A,B=i("2877"),N=Object(B["a"])(O,x,H,!1,null,null,null),P=N.exports,K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("mark-line",{attrs:{markLineTime:t.currentTime,getTimeLinePosition:t.getTimeLinePosition,color:"rgba(255,0,0,.4)"}})},$=[],j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"gantt-markline",style:{"background-color":t.color,left:t.getPosition()+"px"}},[i("div",{staticClass:"gantt-markline-label",style:{"background-color":t.color}},[t._v(t._s(t.moment(t.markLineTime).format("HH:mm:ss")))])])},E=[],D={name:"MarkLine",props:{markLineTime:{validator:function(t){return o()(t).isValid()}},color:{type:String,default:"#0ca30a"},getTimeLinePosition:{type:Function,required:!0}},data:function(){return{visible:!1,moment:o.a}},methods:{getPosition:function(){return null==this.markLineTime?(this.visible=!1,0):(this.visible=!0,this.getTimeLinePosition(this.markLineTime))}}},z=D,Y=Object(B["a"])(z,j,E,!1,null,null,null),M=Y.exports,q={name:"CurrentTime",components:{MarkLine:M},props:{getTimeLinePosition:{type:Function,required:!0}},data:function(){return{currentTime:o()().toString()}},created:function(){var t=this,e=setInterval(function(){t.currentTime=o()().toString()},1e3);this.$once("hook:beforeDestroy",function(){clearInterval(e)})}},I=q,F=Object(B["a"])(I,K,$,!1,null,null,null),X=F.exports,R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"gantt-leftbar"},[i("div",{staticClass:"gantt-leftbar-item gantt-block-top-space",style:{height:t.calTopSpace()+"px"}}),t._l(t.showDatas,function(e,r){return i("div",{key:t.dataKey?e[t.dataKey]:r,staticClass:"gantt-leftbar-item gantt-cell-height"},[t._t("default",null,{data:e})],2)})],2)},U=[],V={props:{scrollTop:{type:Number,required:!0},containerHeight:{type:Number,required:!0},containerWidth:{type:Number,required:!0},cellHeight:{type:Number,required:!0},datas:{type:Array,required:!0}},data:function(){return{showDatas:[],oldCurrentIndex:0,preload:1}},computed:{blockHeight:function(){var t=this.datas,e=this.cellHeight;return t.length*e},currentIndex:function(){return Math.ceil(this.scrollTop/this.cellHeight)}},watch:{currentIndex:function(t){var e=this.oldCurrentIndex,i=this.preload;(t<e-i||t>e+i)&&(this.oldCurrentIndex=t,this.spliceData())}},created:function(){this.spliceData()},methods:{spliceData:function(){var t=this.containerHeight,e=this.currentIndex,i=this.cellHeight,r=this.preload,n=e+Math.ceil(t/i),a=e-r>=0?e-r:0;this.showDatas=this.datas.slice(a,n+r)},calTopSpace:function(){var t=this.oldCurrentIndex,e=this.cellHeight,i=this.preload,r=t-i>=0?t-i:0;return r*e}}},J=V,G={name:"LeftBar",mixins:[J],props:{dataKey:String,datas:{type:Array,required:!0}}},Q=G,Z=Object(B["a"])(Q,R,U,!1,null,null,null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"gantt-blocks",style:{height:t.blockHeight+"px"}},[i("div",{staticClass:"gantt-block gantt-block-top-space",style:{height:t.calTopSpace()+"px"}}),t._l(t.showDatas,function(e,r){return i("div",{key:t.dataKey?e[t.dataKey]:r,staticClass:"gantt-block gantt-cell-height"},t._l(t.concatArray(e),function(r,n){return t.isInTimeRange(r)?i("div",{key:t.itemKey?r[t.itemKey]:n,staticClass:"gantt-block-item",style:{left:t.getPosition(r)+"px",width:t.getWidth(r)+"px"}},[t._t("default",null,{data:e,item:r})],2):t._e()}),0)})],2)},it=[],rt=i("f499"),nt=i.n(rt),at=i("a745"),lt=i.n(at),st={name:"Blocks",mixins:[J],props:{dataKey:String,itemKey:String,arrayKeys:{type:Array},scrollLeft:Number,beginTimeOfTimeLine:{type:o.a,required:!0},cellWidth:{type:Number,required:!0},scale:{type:Number,required:!0}},data:function(){return{startTime:null,endTime:null}},created:function(){this.getTimeRange()},mounted:function(){},computed:{beginTimeOfTimeLineFormat:function(){return this.beginTimeOfTimeLine.toString()},renderAarrys:function(){var t=this.arrayKeys;return t.length>0?t:["gtArray"]}},watch:{scrollLeft:function(){this.getTimeRange()}},methods:{concatArray:function(t){return this.renderAarrys.reduce(function(e,i){return lt()(t[i])?e.concat(t[i]):e},[])},getTimeRange:function(){var t=this.beginTimeOfTimeLine,e=this.scrollLeft,i=this.cellWidth,r=this.scale,n=this.containerWidth;this.startTime=t.clone().add(e/i*r,"m").toDate().getTime(),this.endTime=t.clone().add((e+n)/i*r,"m").toDate().getTime()},isInTimeRange:function(t){var e=this.startTime,i=this.endTime,r=new Date(t.start).getTime(),n=new Date(t.end).getTime();return e<=r&&r<=i||e<=n&&n<=i},getWidth:function(t){var e={scale:this.scale,cellWidth:this.cellWidth};return f(t.start)||f(t.end)?0:v(t.start,t.end,e)},getPosition:function(t){var e={scale:this.scale,cellWidth:this.cellWidth};return f(t.start)?(p("错误，该数据项不含start 值 ".concat(nt()(t),"，无法计算偏移值。")),0):y(t.start,this.beginTimeOfTimeLineFormat,e)}}},ot=st,ct=Object(B["a"])(ot,et,it,!1,null,null,null),dt=ct.exports,ut={name:"Gantt",components:{Timeline:P,LeftBar:tt,Blocks:dt,MarkLine:M,CurrentTime:X},props:{startTime:{required:!0,validator:function(t){return o()(t).isValid()}},endTime:{required:!0,validator:function(t){return o()(t).isValid()}},cellWidth:{type:Number,default:50},cellHeight:{type:Number,default:20},titleHeight:{type:Number,default:40},titleWidth:{type:Number,default:200},scale:{type:Number,default:60,validator:function(t){return c.includes(t)}},datas:{type:Array,required:!0},dataKey:{type:String,default:void 0},itemKey:{type:String,default:void 0},arrayKeys:{type:Array,default:function(){return[]}},showCurrentTime:{type:Boolean,default:!1},timeLines:{type:Array},scrollToTime:{validator:function(t){return o()(t).isValid()}},scrollToPostion:{validator:function(t){if(f(t.x)&&f(t.y))return p("scrollToPostion 最少需要一个x或者y值"),!1;var e=!m(t.x)||!l()(t.x),i=!m(t.y)||!l()(t.y);return!(!e&&!i)||(p("scrollToPostion x或y 有值为非Number类型"),!1)}},hideHeader:{type:Boolean,default:!1},hideXScrollBar:{type:Boolean,default:!1},hideYScrollBar:{type:Boolean,default:!1}},data:function(){return{selector:{gantt_leftbar:{},gantt_table:{},gantt_scroll_y:{},gantt_timeline:{},gantt_scroll_x:{},gantt_markArea:{}},scrollTop:0,scrollLeft:0,containerHeight:window.screen.availHeight,containerWidth:window.screen.availWidth,initSize_:"",scrollBarWitdh:17}},computed:{start:function(){return o()(this.startTime)},end:function(){return o()(this.endTime)},totalWidth:function(){var t=this.cellWidth,e=this.totalScales;return t*e},totalScales:function(){var t=this.start,e=this.end,i=this.scale;return h(t,e,i)},totalHeight:function(){var t=this.datas,e=this.cellHeight;return t.length*e},beginTimeOfTimeLine:function(){var t=u(this.start,this.scale);return t},avialableScrollLeft:function(){var t=this.totalWidth,e=this.containerWidth,i=this.titleWidth;return t-e-i-1}},watch:{cellWidth:function(){this.resetCss()},cellHeight:function(){this.resetCss()},scrollToTime:{handler:function(t){var e=this;if(t){var i=this.start,r=this.end,n=this.beginTimeOfTimeLine,a=this.scale,l=this.cellWidth,s=o()(t);if(s.isAfter(i)&&s.isBefore(r)){var c={cellWidth:l,scale:a},d=y(t,n.toString(),c);this.$nextTick(function(){return e.syncScrollX({target:{scrollLeft:d}},!0)})}else p("当前滚动至".concat(t,"不在").concat(i,"和").concat(r,"的范围之内"))}},immediate:!0},scrollToPostion:{handler:function(t){var e=this;if(t){var i=l()(t.x)?void 0:t.x,r=l()(t.y)?void 0:t.y;this.$nextTick(function(){m(i)&&i!==e.scrollLeft&&e.syncScrollX({target:{scrollLeft:i}},!0),m(r)&&r!==e.scrollTop&&e.syncScrollY({target:{scrollTop:r}},!0)})}},immediate:!0},scrollTop:function(t){this.$emit("scrollTop",t)},scrollLeft:function(t){this.$emit("scrollLeft",t)}},created:function(){this.initSize_=_(this.getContainerSize)},mounted:function(){var t=this;this.resetCss(),this.getSelector(),this.initSize_(),window.addEventListener("resize",this.initSize_),this.$once("hook:beforeDestroy",function(){window.removeEventListener("resize",t.initSize_)})},methods:{getContainerSize:function(){var t=this.$refs.blocksWrapper;this.containerHeight=t.clientHeight,this.containerWidth=t.clientWidth},getTimeLinePosition:function(t){var e=this.cellWidth,i=this.scale,r=this.beginTimeOfTimeLine,n=this.titleWidth,a={cellWidth:e,scale:i};return y(t,r.toString(),a)+n},getSelector:function(){this.selector.gantt_leftbar=this.$refs.leftbarWrapper,this.selector.gantt_table=this.$refs.blocksWrapper,this.selector.gantt_scroll_y=this.$refs.scrollXBar,this.selector.gantt_timeline=this.$refs.headerTimeline,this.selector.gantt_scroll_x=this.$refs.scrollYBar,this.selector.gantt_markArea=this.$refs.marklineArea},wheelHandle:function(t){var e=this,i=t.deltaX,r=t.deltaY;this.$nextTick(function(){if(0!=r&&e.syncScrollY({target:{scrollTop:e.scrollTop+r}},!0),0!=i){if(e.scrollLeft+i>=e.avialableScrollLeft)return;e.scrollLeft+i<0?e.syncScrollX({target:{scrollLeft:0}},!0):e.syncScrollX({target:{scrollLeft:e.scrollLeft+i}},!0)}})},syncScrollY:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.selector,r=i.gantt_leftbar,n=i.gantt_table,a=i.gantt_scroll_y,l=t.target.scrollTop;e?a.scrollTop=l:(r.scrollTop=l,n.scrollTop=l,this.scrollTop=l)},syncScrollX:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.selector,r=i.gantt_table,n=i.gantt_timeline,a=i.gantt_markArea,l=i.gantt_scroll_x,s=t.target.scrollLeft;e?l.scrollLeft=s:(r.scrollLeft=s,n.scrollLeft=s,a.style.left="-"+s+"px",this.scrollLeft=s)},resetCss:function(){var t=document.getElementById("gantt-cell-style"),e=this.cellWidth,i=this.cellHeight,r=".gantt-cell-width{width:".concat(e,"px;}\n        .gantt-cell-height{height:").concat(i,"px;}\n        .gantt-block{background-size: ").concat(e,"px ").concat(i,"px;");if(null==t){var n=document.createElement("style");n.setAttribute("id","gantt-cell-style"),n.setAttribute("type","text/css"),n.innerText=r,document.head.appendChild(n)}else t.innerText=r}}},ht=ut,ft=(i("affe"),Object(B["a"])(ht,r,n,!1,null,null,null)),mt=ft.exports,pt={install:function(t,e){t.component("v-gantt-chart",mt)}};"undefined"!==typeof window&&window.Vue&&window.Vue.use(mt);e["default"]=pt},"7ee1":function(t,e,i){},8814:function(t,e,i){},"9fa0":function(t,e,i){t.exports=i("7305")},affe:function(t,e,i){"use strict";var r=i("7ee1"),n=i.n(r);n.a},c346:function(t,e,i){"use strict";var r=i("292f"),n=i.n(r);n.a},ce2f:function(t,e,i){"use strict";var r=i("5cf8"),n=i.n(r);n.a}});
//# sourceMappingURL=app.f6d193b9.js.map