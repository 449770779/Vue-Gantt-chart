(function(t){function e(e){for(var i,l,s=e[0],o=e[1],c=e[2],u=0,h=[];u<s.length;u++)l=s[u],a[l]&&h.push(a[l][0]),a[l]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);d&&d(e);while(h.length)h.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],i=!0,s=1;s<r.length;s++){var o=r[s];0!==a[o]&&(i=!1)}i&&(n.splice(e--,1),t=l(l.s=r[0]))}return t}var i={},a={app:0},n=[];function l(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=t,l.c=i,l.d=function(t,e,r){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(r,i,function(e){return t[e]}.bind(null,i));return r},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=o;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},2210:function(t,e,r){"use strict";var i=r("71f0"),a=r.n(i);a.a},"54ab":function(t,e,r){"use strict";var i=r("e998"),a=r.n(i);a.a},"56d7":function(t,e,r){"use strict";r.r(e);r("922e"),r("4157");var i=r("836b"),a=r.n(i),n=(r("5c07"),r("53da"),r("2556"),r("d0f8"),r("6e6d")),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("header",{staticClass:"top-bar"},[t._v("Vue-Gantt-Chart\n    "),r("label",{attrs:{for:"cellWidth"}},[t._v("cellWidth")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.cellWidth,expression:"cellWidth",modifiers:{number:!0}}],attrs:{type:"range",min:"20",max:"100"},domProps:{value:t.cellWidth},on:{__r:function(e){t.cellWidth=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),r("label",{attrs:{for:"cellHeight"}},[t._v("cellHeight")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.cellHeight,expression:"cellHeight",modifiers:{number:!0}}],attrs:{type:"range",min:"20",max:"100"},domProps:{value:t.cellHeight},on:{__r:function(e){t.cellHeight=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),r("label",{attrs:{for:"titleWith"}},[t._v("titleWidth")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.titleWidth,expression:"titleWidth",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:"250"},domProps:{value:t.titleWidth},on:{__r:function(e){t.titleWidth=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),r("label",{attrs:{for:"hideHeader"}},[t._v("hideHeader")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.hideHeader,expression:"hideHeader"}],attrs:{id:"hideHeader",type:"checkbox"},domProps:{checked:Array.isArray(t.hideHeader)?t._i(t.hideHeader,null)>-1:t.hideHeader},on:{change:function(e){var r=t.hideHeader,i=e.target,a=!!i.checked;if(Array.isArray(r)){var n=null,l=t._i(r,n);i.checked?l<0&&(t.hideHeader=r.concat([n])):l>-1&&(t.hideHeader=r.slice(0,l).concat(r.slice(l+1)))}else t.hideHeader=a}}}),r("label",{attrs:{for:"datasNum"}},[t._v("datasNum")]),r("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:t.datasNum,expression:"datasNum",modifiers:{number:!0,lazy:!0}}],attrs:{id:"datasNum"},domProps:{value:t.datasNum},on:{change:function(e){t.datasNum=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),r("label",{attrs:{for:"scrollToY"}},[t._v("scrollToY")]),r("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:t.scrollToY,expression:"scrollToY",modifiers:{number:!0,lazy:!0}}],attrs:{id:"scrollToY"},domProps:{value:t.scrollToY},on:{change:function(e){t.scrollToY=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),r("label",{attrs:{for:"scale"}},[t._v("scale")]),r("select",{directives:[{name:"model",rawName:"v-model.number",value:t.scale,expression:"scale",modifiers:{number:!0}}],attrs:{id:"scale"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var r="_value"in e?e._value:e.value;return t._n(r)});t.scale=e.target.multiple?r:r[0]}}},t._l(t.scaleList,function(e){return r("option",{key:e},[t._v(t._s(e))])}),0),r("span",[t._v("minute")])]),r("div",{staticClass:"container"},[r("v-gantt-chart",{attrs:{startTime:t.startTime,endTime:t.endTime,cellWidth:t.cellWidth,cellHeight:t.cellHeight,timeLines:t.timeLines,titleHeight:t.titleHeight,scale:t.scale,titleWidth:t.titleWidth,showCurrentTime:"",hideHeader:t.hideHeader,dataKey:t.dataKey,arrayKeys:t.arrayKeys,scrollToPostion:t.positionA,datas:t.datasA},on:{scrollLeft:t.scrollLeftA},scopedSlots:t._u([{key:"block",fn:function(e){var i=e.data,a=e.item;return[r("Test",{attrs:{data:i,updateTimeLines:t.updateTimeLines,cellHeight:t.cellHeight,currentTime:t.currentTime,item:a}})]}},{key:"left",fn:function(t){var e=t.data;return[r("TestLeft",{attrs:{data:e}})]}},{key:"title",fn:function(){return[t._v("\n        铁胆火车侠日程表\n      ")]},proxy:!0}])}),r("v-gantt-chart",{attrs:{startTime:t.startTime,endTime:t.endTime,cellWidth:t.cellWidth,cellHeight:t.cellHeight,timeLines:t.timeLines,titleHeight:t.titleHeight,scale:t.scale,titleWidth:t.titleWidth,showCurrentTime:"",hideHeader:"",dataKey:t.dataKey,arrayKeys:t.arrayKeys,scrollToPostion:t.positionB,customGenerateBlocks:"",datas:t.datasB},on:{scrollLeft:t.scrollLeftB},scopedSlots:t._u([{key:"block",fn:function(e){var i=e.data,a=e.getPositonOffset,n=e.getWidthAbout2Times,l=e.isInRenderingTimeRange;e.startTimeOfRenderArea,e.endTimeOfRenderArea;return t._l(i.gtArray,function(e,s){return l(e.start)||l(e.end)?r("div",{key:e.id,staticClass:"gantt-block-item",style:{left:a(e.start)+"px",width:n(e.start,e.end)+"px"}},[r("Test",{attrs:{data:i,updateTimeLines:t.updateTimeLines,cellHeight:t.cellHeight,currentTime:t.currentTime,item:e}})],1):t._e()})}},{key:"left",fn:function(t){var e=t.data;return[r("TestLeft",{attrs:{data:e}})]}},{key:"title",fn:function(){return[t._v("\n        铁胆火车侠日程表\n      ")]},proxy:!0}])})],1),t._m(0)])},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("footer",{staticClass:"main-footer"},[t._v("MIT ©wuchouchou"),r("span",{staticStyle:{float:"right"}},[t._v("注:该demo由两个甘特组件组合而成")])])}],o=(r("48fb"),r("96f8")),c=r.n(o),d=(r("ea65"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[r("div",{staticClass:"plan",style:{"background-color":t.statusColor,"margin-top":.1*t.cellHeight+"px"},attrs:{slot:"reference"},on:{click:t.onClick},slot:"reference"},[r("div",{staticClass:"runTime"},[r("span",[t._v("S:"+t._s(t.startToString))]),r("span",[t._v("E:"+t._s(t.endToString))])]),r("div",{staticClass:"middle"},[t._v("编号"+t._s(t.item.id))])]),r("div",{staticClass:"detail"},[r("span",{staticClass:"header"},[t._v(t._s(t.data.type)+t._s(t.data.name)+t._s(t.data.id))]),r("ul",[r("li",[r("span",[t._v("发车时间：")]),r("span",[t._v(t._s(t.startToString))])]),r("li",[r("span",[t._v("到站时间：")]),r("span",[t._v(t._s(t.endToString))])]),r("li",[r("span",[t._v("载员：")]),r("span",[t._v(t._s(t.item.passenger))])]),r("li",[r("span",[t._v("编号：")]),r("span",[t._v(t._s(t.item.id))])])])])])}),u=[],h=(r("b06f"),r("50af")),f=r.n(h),m="#D5F8EA",g="#BFF2FE",p="#F2F2F2",v={name:"Test",props:{data:Object,item:Object,currentTime:f.a,updateTimeLines:Function,cellHeight:Number,startTimeOfRenderArea:Number},data:function(){return{dayjs:f.a}},computed:{statusColor:function(){var t=this.item,e=this.currentTime,r=f()(t.start),i=f()(t.end);return r.isBefore(e)&&i.isAfter(e)?m:i.isBefore(e)?p:g},startToString:function(){return f()(this.item.start).format("HH:mm")},endToString:function(){return f()(this.item.end).format("HH:mm")}},methods:{onClick:function(){this.updateTimeLines(this.item.start,this.item.end)}}},y=v,T=(r("54ab"),r("17cc")),b=Object(T["a"])(y,d,u,!1,null,"16e1f6bc",null),_=b.exports,H=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"name",style:{background:t.data.colorPair.light}},[r("div",{staticClass:"colorBar",style:{background:t.data.colorPair.dark}}),r("div",{staticClass:"type"},[t._v(t._s(t.data.type))]),r("div",{staticClass:"carId"},[t._v(t._s(t.data.name)+t._s(t.data.id))]),r("div",{staticClass:"speed"},[t._v(t._s(t.data.speed)+"km/s")])])},k=[],x={name:"TestLeft",props:{data:Object}},A=x,O=(r("ce2f"),Object(T["a"])(A,H,k,!1,null,"46d7a7a4",null)),w=O.exports,S=(r("f91a"),r("fddc")),W=r.n(S),R=["(252, 105, 100)","(247, 167, 71)","(116, 202, 90)","(83, 186, 241)","(208, 142, 2231)"],L="希望号,飞翼号,光明号,窥探号,力神号,警官号,闪电流星号,博士号,霹雳火神号,狙击手号,希望之光号,南海忍者号,火速E3号,山神号,安全卫士号,铁锤号,寿星号,星星号,罗曼斯卡,欲望号,霹雳雷电号,消防号,欧洲之星号".split(","),B="🚅,🚈,🚄".split(","),C=W.a.Random,N={id:function(){return"JHR"+C.natural(100,999)+C.character("upper")+C.character("upper")},name:function(){return C.pick(L)},type:function(){return C.pick(B)},colorPair:function(){var t="rgb"+C.pick(R);return{dark:t.replace(")",",0.8)"),light:t.replace(")",",0.1)")}},speed:function(){return C.natural(0,200)},gtArray:function(){var t=[],e=0,r=C.natural(1,9),i=f()().subtract(12,"hour"),a=f()().subtract(12,"hour");while(e<r)i=a.add(C.natural(1,5),"hour"),a=i.add(C.natural(1,5),"hour"),t.push({id:"D"+C.natural(1e3,9999),passenger:C.natural(10,200),start:i.toString(),end:a.toString()}),e++;return t}};function P(t){for(var e=[],r=0,i=C.natural(t,t);r<i;r++)e.push(W.a.mock(N));return e}var K="1,2,3,4,5,6,10,12,15,20,30,60,120,180,240,360,720,1440".split(",").map(function(t){return c()(t)}),$={name:"App",components:{Test:_,TestLeft:w},data:function(){return{timeLines:[{time:f()().add(2,"hour").toString()},{time:f()().add(5,"hour").toString(),color:"#747e80"}],currentTime:f()(),startTime:f()().subtract(5,"hour").toString(),endTime:f()().add(2,"day").add(2,"hour").toString(),cellWidth:50,cellHeight:30,titleHeight:40,titleWidth:250,scale:60,datasNum:100,datasA:P(100),datasB:P(100),dataKey:"id",scaleList:K,scrollToTime:f()().add(1,"day").toString(),scrollToPostion:{x:1e4,y:1e4},hideHeader:!1,arrayKeys:["gtArray","error"],scrollToY:0,positionB:{},positionA:{}}},watch:{datasNum:function(t){this.datasA=P(t),this.datasB=P(t)},scrollToY:function(t){this.positionA={x:t}}},methods:{updateTimeLines:function(t,e){this.timeLines=[{time:t},{time:e,color:"#747e80"}]},scrollLeftA:function(t){this.positionB={x:t}},scrollLeftB:function(t){this.positionA={x:t}}}},Y=$,j=(r("2210"),Object(T["a"])(Y,l,s,!1,null,"779cf1ea",null)),D=j.exports,I=r("9fa0"),E=r.n(I);n["default"].config.productionTip=!1,n["default"].use(E.a),n["default"].use(a.a),new n["default"]({render:function(t){return t(D)}}).$mount("#app")},"6e57":function(t,e,r){},"71f0":function(t,e,r){},7305:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"gantt-chart",on:{wheel:t.wheelHandle}},[r("div",{staticClass:"gantt-container",style:{height:"calc(100% - "+t.scrollXBarHeight+"px)",width:"calc(100% - "+t.scrollYBarWidth+"px)"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!t.hideHeader,expression:"!hideHeader"}],staticClass:"gantt-header",style:{width:"calc(100% + "+t.scrollYBarWidth+"px)"}},[r("div",{staticClass:"gantt-header-title",style:{"line-height":t.titleHeight+"px",height:t.titleHeight+"px",width:t.titleWidth+"px"}},[t._t("title",[t._v("welcome v-gantt-chart")])],2),r("div",{ref:"headerTimeline",staticClass:"gantt-header-timeline"},[r("div",{staticClass:"gantt-timeline-wrapper",style:{width:t.totalWidth+t.scrollYBarWidth+"px"}},[r("timeline",{attrs:{start:t.start,end:t.end,cellWidth:t.cellWidth,titleHeight:t.titleHeight,scale:t.scale}})],1)])]),r("div",{staticClass:"gantt-body",style:{height:"calc(100% - "+t.actualHeaderHeight+"px)"}},[r("div",{staticClass:"gantt-table"},[r("div",{ref:"marklineArea",staticClass:"gantt-markline-area",style:{marginLeft:t.titleWidth+"px"}},[t.showCurrentTime?r("CurrentTime",{attrs:{getPositonOffset:t.getPositonOffset}}):t._e(),t._l(t.timeLines,function(e,i){return r("mark-line",{key:i,attrs:{markLineTime:e.time,getPositonOffset:t.getPositonOffset,color:e.color}})})],2),r("div",{ref:"leftbarWrapper",staticClass:"gantt-leftbar-wrapper",style:{width:t.titleWidth+"px",height:"calc(100% + "+t.scrollXBarHeight+"px)"}},[r("LeftBar",{style:{height:t.totalHeight+t.scrollXBarHeight+"px"},attrs:{datas:t.datas,dataKey:t.dataKey,scrollTop:t.scrollTop,heightOfRenderAera:t.heightOfRenderAera,widthOfRenderAera:t.widthOfRenderAera,cellHeight:t.cellHeight},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return[t._t("left",null,{data:r})]}}],null,!0)})],1),r("div",{ref:"blocksWrapper",staticClass:"gantt-blocks-wrapper"},[r("blocks",{style:{width:t.totalWidth+"px"},attrs:{scrollTop:t.scrollTop,scrollLeft:t.scrollLeft,heightOfRenderAera:t.heightOfRenderAera,widthOfRenderAera:t.widthOfRenderAera,arrayKeys:t.arrayKeys,itemKey:t.itemKey,dataKey:t.dataKey,datas:t.datas,cellWidth:t.cellWidth,cellHeight:t.cellHeight,scale:t.scale,getPositonOffset:t.getPositonOffset,getWidthAbout2Times:t.getWidthAbout2Times,customGenerateBlocks:t.customGenerateBlocks,startTimeOfRenderArea:t.startTimeOfRenderArea,endTimeOfRenderArea:t.endTimeOfRenderArea},scopedSlots:t._u([t.customGenerateBlocks?{key:"default",fn:function(e){var r=e.data,i=e.getPositonOffset,a=e.getWidthAbout2Times,n=e.isInRenderingTimeRange;return[t._t("block",null,{data:r,getPositonOffset:i,getWidthAbout2Times:a,isInRenderingTimeRange:n,startTimeOfRenderArea:t.startTimeOfRenderArea,endTimeOfRenderArea:t.endTimeOfRenderArea})]}}:{key:"default",fn:function(e){var r=e.data,i=e.item;return[t._t("block",null,{data:r,item:i})]}}],null,!0)})],1)])])]),r("div",{ref:"scrollYBar",staticClass:"gantt-scroll-y",style:{width:t.scrollYBarWidth+"px",height:"calc(100% - "+t.actualHeaderHeight+"px",marginTop:t.actualHeaderHeight+"px"},on:{scroll:t.syncScrollY}},[r("div",{style:{height:t.totalHeight+"px"}})]),r("div",{ref:"scrollXBar",staticClass:"gantt-scroll-x",style:{height:t.scrollXBarHeight+"px",width:"calc(100% - "+t.titleWidth+"px )",marginLeft:t.titleWidth+"px"},on:{scroll:t.syncScrollX}},[r("div",{style:{width:t.totalWidth+"px"}})])])},a=[],n=(r("a4bf"),r("0811"),r("0c8d")),l=r.n(n),s=(r("55f5"),r("b653"),r("9b7e"),r("c14b")),o=r.n(s),c=r("f147"),d=[1,2,3,4,5,6,10,12,15,20,30,60,120,180,240,360,720,1440];function u(t){if(!d.includes(t))throw new RangeError("错误的scale值，输入值为".concat(t,",可用的scale值为").concat(d.join(",")));return!0}function h(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;u(r);var i=t.clone(),a=r/60;return r>60?(e=Math.floor(t.hour()/a),i=i.hour(e*a).minute(0).second(0)):(e=Math.floor(t.minute()/r),i=i.minute(e*r).second(0)),i}function f(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;if(t.isAfter(e))throw new TypeError("错误的参数顺序，函数calcScalesAbout2Times的第一个时间参数必须大于第二个时间参数");u(r);var i=h(t,r),a=0;while(!i.isAfter(e))a++,i=i.add(r,"minute");return a}function m(t){return void 0===t||null===t}function g(t){return void 0!==t&&null!==t}function p(t){console.warn(t)}var v=function(){var t={},e={};return function(r,i){return t[r]!==i&&(t[r]=i,e[r]=b(i)),e[r]}}();function y(t,e,r){var i=r.scale,a=r.cellWidth,n=v("pStart",t),l=b(e);return _(n,l)/i*a}function T(t,e,r){var i=r.scale,a=r.cellWidth,n=v("pStart",t),l=v("pBeginTimeOfTimeLine",e);return _(l,n)/i*a}function b(t){return new Date(t)}function _(t,e){var r=e.getTime()-t.getTime();return r/1e3/60}function H(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=t,a=!0;return function(){var t=arguments,n=this;return a?(i.apply(n,t),a=!1):!e&&void(e=setTimeout(function(){clearTimeout(e),e=null,i.apply(n,t)},r))}}var k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"gantt-timeline",style:{"margin-left":-t.cellWidth/2+"px"}},t._l(t.getDays,function(e,i){return r("div",{key:i,staticClass:"gantt-timeline-block",style:{width:t.getTimeScales(e).length*t.cellWidth+"px"}},[r("div",{staticClass:"gantt-timeline-day ",style:t.heightStyle},[t._v("\n      "+t._s(e.format("MM/DD")))]),r("div",{staticClass:"gantt-timeline-scale ",style:t.heightStyle},t._l(t.getTimeScales(e),function(e,i){return r("div",{key:i,style:t.cellWidthStyle},[t._v("\n        "+t._s(e)+"\n      ")])}),0)])}),0)},x=[],A=r("53e6"),O=r.n(A),w=O()(),S=O()(),W=O()();function R(t,e){return t.isSame(e,"day")}var L={name:"Timeline",props:{start:{type:o.a},end:{type:o.a},cellWidth:{type:Number},titleHeight:{type:Number},scale:{type:Number}},computed:{getDays:function(){for(var t=[],e=this.start,r=this.end;!R(e,r);e=e.add(1,"day"))t.push(e);return t.push(e),t},cellWidthStyle:function(){return{width:"".concat(this.cellWidth,"px")}},heightStyle:function(){return{height:this.titleHeight/2+"px","line-height":this.titleHeight/2+"px"}}},methods:{getTimeScales:function(t){var e=this.start,r=this.end;return R(t,e)?this.generateTimeScale(w):R(t,r)?this.generateTimeScale(W):this.generateTimeScale(S)},generateTimeScale:function(t){var e,r,i=[],a=this.start,n=this.end,l=this.scale;switch(t){case w:e=h(a,l),r=R(a,n)?n:a.endOf("day");break;case W:e=n.startOf("day"),r=n;break;case S:e=a.startOf("day"),r=a.endOf("day");break;default:throw new TypeError("错误的计算类型")}while(!e.isAfter(r))l>=60?i.push(e.format("HH")):i.push(e.format("HH:mm")),e=e.add(l,"minute");return i}}},B=L,C=r("17cc"),N=Object(C["a"])(B,k,x,!1,null,null,null),P=N.exports,K=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("mark-line",{attrs:{markLineTime:t.currentTime,getPositonOffset:t.getPositonOffset,color:"rgba(255,0,0,.4)"}})},$=[],Y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"gantt-markline",style:{"background-color":t.color,left:t.getPosition()+"px"}},[r("div",{staticClass:"gantt-markline-label",style:{"background-color":t.color}},[t._v(t._s(t.dayjs(t.markLineTime).format("HH:mm:ss")))])])},j=[],D={name:"MarkLine",props:{markLineTime:{validator:function(t){return o()(t).isValid()}},color:{type:String,default:"#0ca30a"},getPositonOffset:{type:Function,required:!0}},data:function(){return{visible:!1,dayjs:o.a}},methods:{getPosition:function(){return null==this.markLineTime?(this.visible=!1,0):(this.visible=!0,this.getPositonOffset(this.markLineTime))}}},I=D,E=Object(C["a"])(I,Y,j,!1,null,null,null),X=E.exports,M={name:"CurrentTime",components:{MarkLine:X},props:{getPositonOffset:{type:Function,required:!0}},data:function(){return{currentTime:o()().toString()}},created:function(){var t=this,e=setInterval(function(){t.currentTime=o()().toString()},1e3);this.$once("hook:beforeDestroy",function(){clearInterval(e)})}},F=M,q=Object(C["a"])(F,K,$,!1,null,null,null),G=q.exports,V=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"gantt-leftbar"},[r("div",{staticClass:"gantt-leftbar-item gantt-block-top-space",style:{height:t.topSpace+"px"}}),t._l(t.showDatas,function(e,i){return r("div",{key:t.dataKey?e[t.dataKey]:i,staticClass:"gantt-leftbar-item",style:t.cellHeightStyle},[t._t("default",[r("div",{staticClass:"gantt-leftbar-defalutItem"},[t._v("need slot")])],{data:e})],2)})],2)},z=[],U={props:{scrollTop:{type:Number,required:!0},heightOfRenderAera:{type:Number,required:!0},cellHeight:{type:Number,required:!0},datas:{type:Array,required:!0}},data:function(){return{oldTopIndex:0,preload:1,startRenderNum:0,endRenderNum:0}},computed:{blockHeight:function(){var t=this.datas,e=this.cellHeight;return t.length*e},currentTopIndex:function(){return Math.ceil(this.scrollTop/this.cellHeight)},showDatas:function(){var t=this.startRenderNum,e=this.endRenderNum,r=this.datas;return r.slice(t,e)},topSpace:function(){var t=this.oldTopIndex,e=this.cellHeight,r=this.preload,i=t-r>0?t-r:0;return i*e}},watch:{currentTopIndex:function(t){var e=this.oldTopIndex,r=this.preload;if(0!==r){if(e!==t){var i=1;(t<e-(r-i)||t>e+(r-i))&&(this.oldTopIndex=t,this.sliceData())}}else this.sliceData()},datas:function(){this.sliceData()},heightOfRenderAera:function(){this.sliceData()},cellHeight:function(){this.sliceData()}},created:function(){this.sliceData()},methods:{sliceData:function(){var t=this.heightOfRenderAera,e=this.currentTopIndex,r=this.cellHeight,i=this.preload;return 0===t||0===r?(this.endRenderNum=0,void(this.startRenderNum=0)):0===i?(this.endRenderNum=1/0,void(this.startRenderNum=-1/0)):(this.endRenderNum=e+Math.ceil(t/r)+i,void(this.startRenderNum=e-i>0?e-i:0))}}},J=U,Q={name:"LeftBar",mixins:[J],props:{dataKey:String,datas:{type:Array,required:!0}},computed:{cellHeightStyle:function(){return{height:"".concat(this.cellHeight,"px")}}}},Z=Q,tt=Object(C["a"])(Z,V,z,!1,null,null,null),et=tt.exports,rt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"gantt-blocks",style:{height:t.blockHeight+"px"}},[r("div",{staticClass:"gantt-block gantt-block-top-space",style:{height:t.topSpace+"px"}}),t._l(t.showDatas,function(e,i){return r("div",{key:t.dataKey?e[t.dataKey]:i,staticClass:"gantt-block",style:t.blockStyle},[t.customGenerateBlocks?[t._t("default",[t._v("need slot")],{data:e,getPositonOffset:t.getPositonOffset,getWidthAbout2Times:t.getWidthAbout2Times,isInRenderingTimeRange:t.isInRenderingTimeRange})]:t._l(t.concatArray(e),function(i,a){return t.isInRenderingTimeRange(i.start)||t.isInRenderingTimeRange(i.end)?r("div",{key:t.itemKey?i[t.itemKey]:a,staticClass:"gantt-block-item",style:{left:t.getPosition(i)+"px",width:t.getWidth(i)+"px"}},[t._t("default",[r("div",{staticClass:"gantt-block-defaultBlock"},[t._v("need slot")])],{data:e,item:i})],2):t._e()})],2)})],2)},it=[],at=r("cc80"),nt=r.n(at),lt=r("6c85"),st=r.n(lt),ot={name:"Blocks",mixins:[J],props:{dataKey:String,itemKey:String,arrayKeys:{type:Array},scrollLeft:Number,cellWidth:{type:Number,required:!0},scale:{type:Number,required:!0},widthOfRenderAera:{type:Number,required:!0},endTimeOfRenderArea:[Number,null],startTimeOfRenderArea:[Number,null],getPositonOffset:Function,getWidthAbout2Times:Function,customGenerateBlocks:Boolean},computed:{renderAarrys:function(){var t=this.arrayKeys;return t.length>0?t:["gtArray"]},blockStyle:function(){return{backgroundSize:"".concat(this.cellWidth,"px ").concat(this.cellHeight,"px"),height:"".concat(this.cellHeight,"px")}}},methods:{concatArray:function(t){return this.renderAarrys.reduce(function(e,r){return st()(t[r])?e.concat(t[r]):e},[])},isInRenderingTimeRange:function(t){if(0===this.heightOfRenderAera)return!1;var e=this.startTimeOfRenderArea,r=this.endTimeOfRenderArea;if(m(e)||m(r))return!1;var i=new Date(t).getTime();return e<=i&&i<=r},getWidth:function(t){return m(t.start)||m(t.end)?0:this.getWidthAbout2Times(t.start,t.end)},getPosition:function(t){return m(t.start)?(p("错误，该数据项不含start 值 ".concat(nt()(t),"，无法计算偏移值。")),0):this.getPositonOffset(t.start)}}},ct=ot,dt=Object(C["a"])(ct,rt,it,!1,null,null,null),ut=dt.exports,ht={name:"Gantt",components:{Timeline:P,LeftBar:et,Blocks:ut,MarkLine:X,CurrentTime:G},props:{startTime:{default:function(){return o()()},validator:function(t){var e=o()(t).isValid();return e||p("非法的开始时间 ".concat(t)),e}},endTime:{default:function(){return o()()},validator:function(t){var e=o()(t).isValid();return e||p("非法的结束时间 ".concat(t)),e}},cellWidth:{type:Number,default:50},cellHeight:{type:Number,default:20},titleHeight:{type:Number,default:40},titleWidth:{type:Number,default:200},scale:{type:Number,default:60,validator:function(t){return d.includes(t)}},datas:{type:Array,default:function(){return[]}},dataKey:{type:String,default:void 0},itemKey:{type:String,default:void 0},arrayKeys:{type:Array,default:function(){return[]}},showCurrentTime:{type:Boolean,default:!1},timeLines:{type:Array},scrollToTime:{validator:function(t){return o()(t).isValid()}},scrollToPostion:{validator:function(t){var e=!g(t.x)||!l()(t.x),r=!g(t.y)||!l()(t.y);return!(!e&&!r)||(p("scrollToPostion x或y 有值为非Number类型"),!1)}},hideHeader:{type:Boolean,default:!1},hideXScrollBar:{type:Boolean,default:!1},hideYScrollBar:{type:Boolean,default:!1},customGenerateBlocks:{type:Boolean,default:!1}},data:function(){return{selector:{gantt_leftbar:{},gantt_table:{},gantt_scroll_y:{},gantt_timeline:{},gantt_scroll_x:{},gantt_markArea:{}},scrollTop:0,scrollLeft:0,heightOfRenderAera:0,widthOfRenderAera:0,startTimeOfRenderArea:null,endTimeOfRenderArea:null,scrollBarWitdh:17}},computed:{start:function(){return o()(this.startTime)},end:function(){var t=this.start,e=this.widthOfRenderAera,r=this.scale,i=this.cellWidth,a=o()(this.endTime),n=f(t,a,r)*i;return(t.isAfter(a)||n<=e)&&(a=t.add(e/i*r,"minute")),a},totalWidth:function(){var t=this.cellWidth,e=this.totalScales;return t*e},totalScales:function(){var t=this.start,e=this.end,r=this.scale;return f(t,e,r)},totalHeight:function(){var t=this.datas,e=this.cellHeight;return t.length*e},beginTimeOfTimeLine:function(){var t=h(this.start,this.scale);return t},beginTimeOfTimeLineToString:function(){return this.beginTimeOfTimeLine.toString()},avialableScrollLeft:function(){var t=this.totalWidth,e=this.widthOfRenderAera;return t-e-1},avialableScrollTop:function(){var t=this.totalHeight,e=this.heightOfRenderAera;return t-e-1},scrollXBarHeight:function(){return this.hideXScrollBar?0:this.scrollBarWitdh},scrollYBarWidth:function(){return this.hideYScrollBar?0:this.scrollBarWitdh},actualHeaderHeight:function(){return this.hideHeader?0:this.titleHeight}},watch:{scrollLeft:function(){this.getTimeRange()},widthOfRenderAera:function(){this.getTimeRange()},cellWidth:function(){this.getTimeRange()},scrollToTime:{handler:function(t){var e=this;if(t){var r=this.start,i=this.end,a=o()(t);if(a.isAfter(r)&&a.isBefore(i)){var n=this.getPositonOffset(t);this.$nextTick(function(){return e.syncScrollX({target:{scrollLeft:n}},!0)})}else p("当前滚动至".concat(t,"不在").concat(r,"和").concat(i,"的范围之内"))}},immediate:!0},scrollToPostion:{handler:function(t){var e=this;if(t){var r=l()(t.x)?void 0:t.x,i=l()(t.y)?void 0:t.y;this.$nextTick(function(){g(r)&&r!==e.scrollLeft&&e.syncScrollX({target:{scrollLeft:r}},!0),g(i)&&i!==e.scrollTop&&e.syncScrollY({target:{scrollTop:i}},!0)})}},immediate:!0}},mounted:function(){var t=this;this.getSelector();var e=H(function(e){e.forEach(function(e){var r=e.contentRect;t.heightOfRenderAera=r.height,t.widthOfRenderAera=r.width})}),r=new c["a"](e);r.observe(this.$refs.blocksWrapper)},methods:{getTimeRange:function(){if(0!==this.heightOfRenderAera){var t=this.beginTimeOfTimeLine,e=this.scrollLeft,r=this.cellWidth,i=this.scale,a=this.widthOfRenderAera;this.startTimeOfRenderArea=t.add(e/r*i,"minute").toDate().getTime(),this.endTimeOfRenderArea=t.add((e+a)/r*i,"minute").toDate().getTime()}},getWidthAbout2Times:function(t,e){var r={scale:this.scale,cellWidth:this.cellWidth};return y(t,e,r)},getPositonOffset:function(t){var e={scale:this.scale,cellWidth:this.cellWidth};return T(t,this.beginTimeOfTimeLineToString,e)},getSelector:function(){this.selector.gantt_leftbar=this.$refs.leftbarWrapper,this.selector.gantt_table=this.$refs.blocksWrapper,this.selector.gantt_scroll_y=this.$refs.scrollYBar,this.selector.gantt_timeline=this.$refs.headerTimeline,this.selector.gantt_scroll_x=this.$refs.scrollXBar,this.selector.gantt_markArea=this.$refs.marklineArea},wheelHandle:function(t){var e=this,r=t.deltaX,i=t.deltaY;this.$nextTick(function(){var t=e.scrollTop,a=e.scrollLeft,n=e.avialableScrollLeft,l=e.avialableScrollTop;0!==i&&(t+i>=l&&t!==l?e.syncScrollY({target:{scrollTop:l}},!0):t+i<0&&0!==t?e.syncScrollY({target:{scrollTop:0}},!0):e.syncScrollY({target:{scrollTop:t+i}},!0)),0!==r&&(a+r>=n&&a!==n?e.syncScrollX({target:{scrollLeft:n}},!0):a+r<0&&0!==a?e.syncScrollX({target:{scrollLeft:0}},!0):e.syncScrollX({target:{scrollLeft:a+r}},!0))})},syncScrollY:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.selector,i=r.gantt_leftbar,a=r.gantt_table,n=r.gantt_scroll_y,l=t.target.scrollTop;e?n.scrollTop=l:(i.scrollTop=l,a.scrollTop=l,this.scrollTop=l,this.$emit("scrollTop",l))},syncScrollX:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.selector,i=r.gantt_table,a=r.gantt_timeline,n=r.gantt_markArea,l=r.gantt_scroll_x,s=t.target.scrollLeft;e?l.scrollLeft=s:(i.scrollLeft=s,a.scrollLeft=s,n.style.left="-"+s+"px",this.scrollLeft=s,this.$emit("scrollLeft",s))}}},ft=ht,mt=(r("affe"),Object(C["a"])(ft,i,a,!1,null,null,null)),gt=mt.exports,pt={install:function(t,e){t.component("v-gantt-chart",gt)}};"undefined"!==typeof window&&window.Vue&&window.Vue.use(pt);e["default"]=pt},"9fa0":function(t,e,r){t.exports=r("7305")},affe:function(t,e,r){"use strict";var i=r("c37e"),a=r.n(i);a.a},c37e:function(t,e,r){},ce2f:function(t,e,r){"use strict";var i=r("6e57"),a=r.n(i);a.a},e998:function(t,e,r){}});
//# sourceMappingURL=app.084bfea7.js.map